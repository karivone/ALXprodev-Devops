#!/bin/bash

# List of Pokémon names 
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Base API URL
BASE_URL="https://pokeapi.co/api/v2/pokemon"

# Loop through each Pokémon
for NAME in "${POKEMON_LIST[@]}"; do
    echo "Fetching data for $NAME..."

    # Construct the filename (e.g., bulbasaur.json)
    OUTPUT_FILE="${NAME}.json"

    # Make the API request and save the output
    curl -s -o "$OUTPUT_FILE" "$BASE_URL/$NAME"

    # Check if the request was successful
    if jq -e . "$OUTPUT_FILE" >/dev/null 2>&1; then
        echo "Saved to $OUTPUT_FILE"
    else
        echo "[$(date)] Error retrieving data for $NAME" >> errors.txt
        rm -f "$OUTPUT_FILE"
    fi

    # Delay to avoid hitting the rate limit (adjust as needed)
    sleep 2
done
